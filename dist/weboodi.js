!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.notEmpty=(e=>e.length>0);t.notEmptyList=(e=>e.length>0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),i=n(2),o=i.setLocalStorage("duplikaattiKurssit"),s=i.setLocalStorage("perusOpinnot"),r=i.setLocalStorage("aineOpinnot"),l=i.setLocalStorage("pääaine"),u=i.setLocalStorage("sivuaineet"),p=()=>i.getListFromLocalStorage("duplikaattiKurssit"),k=()=>i.getListFromLocalStorage("perusOpinnot"),d=()=>i.getListFromLocalStorage("aineOpinnot"),c=()=>i.getLocalStorage("pääaine","null"),m=()=>i.getListFromLocalStorage("sivuaineet"),v=e=>Math.max(...e),y=e=>e,b=e=>"string"==typeof e,h=e=>Array.isArray(e),g=e=>e.toLowerCase(),j=(e,t)=>e.reduce((e,n)=>[...e,...(b(t)?[t]:t).map(e=>n[e])],[]),f=(e,t)=>e.sort((e,n)=>n[t]-e[t]),T=({id:e,content:t})=>{const n=document.getElementById(e);null!==n?n.innerHTML=t:console.error("setHtmlContent(): Element with id %s is null",e)},O=["pink","red","orange","yellow","green","blue","indigo","purple"],K={tkt:{perusopinnot:[{name:"Johdatus tietojenkäsittelytieteeseen",keys:["TKT10001","AYTKT10001","582102","A582102"]},{name:"Ohjelmoinnin perusteet",keys:["TKT10002","AYTKT10002","581325","A581325"]},{name:"Ohjelmoinnin jatkokurssi",keys:["TKT10003","AYTKT10003","582103","A582103"]},{name:"Tietokantojen perusteet",keys:["TKT10004","AYTKT10004","581328","A581328"]},{name:"Tietokoneen toiminta",keys:["TKT10005","AYTKT10005","581305","A581305"]}],aineopinnot:[{name:"Tietorakenteet ja algoritmit",keys:["TKT20001","AYTKT20001","58131","A58131"]},{name:"Ohjelmistotekniikan menetelmät",keys:["TKT20002","AYTKT20002","582104","A582104"]},{name:"Käyttöjärjestelmät",keys:["TKT20003","AYTKT20003","582219","A582219"]},{name:"Tietoliikenteen perusteet",keys:["TKT20004","AYTKT20004","582202","A582202"]},{name:"Laskennan mallit",keys:["TKT20005","AYTKT20005","582206","A582206"]},{name:"Ohjelmistotuotanto",keys:["TKT20006","AYTKT20006","581259","A581259"]},{name:"Ohjelmistotuotantoprojekti",keys:["TKT20007","AYTKT20007","581260","A581260"]},{name:"Kandidaatin tutkielma",keys:["TKT20013","AYTKT20013","582204","A582204"]},{name:"Kypsyysnäyte LuK",keys:["TKT20014","AYTKT20014","50036","A50036"]}],mitaNaaOn:[{name:"Johdatus tekoälyyn",keys:["TKT20008","AYTKT20008","582216","A582216"]},{name:"Tietoturvan perusteet",keys:["TKT20009","AYTKT20009","582215","A582215"]}],perusopinnotPre2017:[{name:"Johdatus tietojenkäsittelytieteeseen",keys:["TKT10001","AYTKT10001","582102","A582102"]},{name:"Ohjelmoinnin perusteet",keys:["TKT10002","AYTKT10002","581325","A581325"]},{name:"Ohjelmoinnin jatkokurssi",keys:["TKT10003","AYTKT10003","582103","A582103"]},{name:"Tietokantojen perusteet",keys:["TKT10004","AYTKT10004","581328","A581328"]},{name:"Ohjelmistotekniikan menetelmät",keys:["TKT20002","AYTKT20002","582104","A582104"]}],aineopinnotPre2017:[{name:"Tietorakenteet ja algoritmit",keys:["TKT20001","AYTKT20001","58131","A58131"]},{name:"Käyttöjärjestelmät",keys:["TKT20003","AYTKT20003","582219","A582219"]},{name:"Tietokoneen toiminta",keys:["TKT10005","AYTKT10005","581305","A581305"]},{name:"Tietoliikenteen perusteet",keys:["TKT20004","AYTKT20004","582202","A582202"]},{name:"Laskennan mallit",keys:["TKT20005","AYTKT20005","582206","A582206"]},{name:"Ohjelmistotuotanto",keys:["TKT20006","AYTKT20006","581259","A581259"]},{name:"Ohjelmistotuotantoprojekti",keys:["TKT20007","AYTKT20007","581260","A581260"]},{name:"Kandidaatin tutkielma",keys:["TKT20013","AYTKT20013","582204","A582204"]},{name:"Kypsyysnäyte LuK",keys:["TKT20014","AYTKT20014","50036","A50036"]}],labrat:[{name:"Aineopintojen harjoitustyö: Tietorakenteet ja algoritmit",keys:["TKT20010","58161","AYTKT20010","A58161"]},{name:"Aineopintojen harjoitustyö: Tietokantasovellus",keys:["TKT20011","582203","AYTKT20011","A582203"]},{name:"Aineopintojen harjoitustyö: Tietoliikenne",keys:["TKT20012","AYTKT20012"]},{name:"Aineopintojen harjoitustyö: Ohjelmointi",keys:["582221","A582221"]}]}},A=({db:e,lyhenne:t})=>Object.keys(e).reduce((n,a)=>{const i=!n.length&&h(e[a])&&e[a].find(({keys:e})=>e.map(g).includes(t.toLowerCase()));return n||(h(e[a])?i?i.name:n:A({db:e[a],lyhenne:t}))},""),w=e=>A({db:K,lyhenne:e}),$=()=>({tooltips:{callbacks:{label:(e,t)=>{const n=t.datasets[e.datasetIndex].label||"",a=Math.round(100*e.yLabel)/100;return`${n}: ${e.datasetIndex||(e=>Number(e)===e&&e%1!=0)(a/10)?a:a/10}`}}}}),L=({id:e,labels:t,datasets:n,type:a="bar",customTooltip:i=!1,customTicks:o=!1})=>{const s=55*Math.ceil(v(j(n,"data").map(v))/55),r=document.getElementById(e);if(null===r)throw new Error("draw(): Element with id "+e+"is null");new Chart(r,{type:a,data:{labels:t,datasets:n},options:Object.assign({},i&&$(),{scales:{yAxes:[Object.assign({},o&&{gridLines:{drawBorder:!1,color:O}},{ticks:Object.assign({beginAtZero:!0},o&&{max:s,stepSize:55})})]}})})},S={backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1},x={backgroundColor:"rgba(118, 99, 255, 0.2)",borderColor:"rgba(118,99,132,1)",borderWidth:1},E={backgroundColor:"rgba(99, 255, 157, 0.2)",borderColor:"rgba(99,99,132,1)",borderWidth:1},M=({name:e,callback:t})=>{const n=document.querySelector(`input[name='${e}']`);if(null===n)throw new Error("luoInputKuuntelijaJokaAsettaaArraynCallbackiin(): Input is null");n.addEventListener("input",({target:e})=>{if(null===e)throw new Error("createCoursesArray(): Cannot create a course array if the target is null");t((e=>e.value.split(",").map(C).filter(a.notEmpty))(e))})},Y=e=>j(K.tkt[e],"keys").reduce((e,t)=>[...e,...t],[]),N=()=>{M({name:"duplikaattiKurssit",callback:o}),M({name:"perusOpinnot",callback:s}),M({name:"aineOpinnot",callback:r}),(()=>{const e=document.querySelector("input[name='pääaine']");if(null===e)throw new Error("jepulisKuuntelePääaineenMuutoksia(): Input is null");e.addEventListener("input",({target:e})=>{if(null===e)throw new Error("jepulisKuuntelePääaineenMuutoksia(): Target is null");l(e.value.trim())})})(),M({name:"sivuaineet",callback:u}),(()=>{const e=document.querySelector("button#kliketi-klik");if(null===e)throw new Error("kuunteleppaNapinpainalluksiaJuu(): Input is null");e.addEventListener("click",Ae)})(),(()=>{const e=document.querySelector("button#kliketi-klik-esitäyttö-2017");if(null===e)throw new Error("kuunteleEsitäyttönapinKliksutteluja2017(): Input with id `button#kliketi-klik-esitäyttö-2017` is null");e.addEventListener("click",()=>{s(Y("perusopinnot")),r(Y("aineopinnot")),Ae()})})(),(()=>{const e=document.querySelector("button#kliketi-klik-esitäyttö-pre-2017");if(null===e)throw new Error("kuunteleEsitäyttönapinKliksutteluja2016(): Input with id `button#kliketi-klik-esitäyttö-pre-2017` is null");e.addEventListener("click",()=>{s(Y("perusopinnotPre2017")),r(Y("aineopinnotPre2017")),Ae()})})()},P=e=>e.reduce((e,t)=>((e,t)=>e.find(e=>e.pvm===t))(e,t.pvm)?e.map((({pvm:e,op:t})=>n=>{const a=n.pvm===e?{cumulativeOp:t+n.cumulativeOp,op:t+n.op}:null;return Object.assign({},n,a)})(t)):[...e,t],[]).map(e=>Object.assign({},e,{op:e.op<=10?10*e.op:e.op,realOp:e.op})),C=e=>e.replace(/&nbsp;/g," ").trim(),I=([e,t,n,a,i="01.01.1970",o])=>({pvm:i,kurssi:t,lyhenne:e,luennoitsija:o,op:Number(G(n)),arvosana:Number(a),pvmDate:oe(se(i))}),F=(e,t,n)=>[...e,Object.assign({},t,{cumulativeOp:t.op+(n&&e[n-1].cumulativeOp)})],D=e=>(()=>[...Array.from(document.querySelectorAll("[name=suoritus] + table + table:not(.eisei) table.eisei tbody tr"))])().map(e=>[...Array.from(e.querySelectorAll("td"))]).filter(a.notEmptyList).map(e=>j(e,"textContent").map(C)).filter(([t])=>!e.includes(t)).reverse().filter(e=>e.length>3).map(I).filter(({op:e})=>!isNaN(e)).sort((e,t)=>e.pvmDate.getTime()-t.pvmDate.getTime()).reduce(F,[]),_=(e,t)=>e.reduce((e,n,a)=>a<t?[...e,n]:e,[]),q=(e,t)=>e+t,U=e=>e.reduce(q,0)/e.length,J=e=>e.filter(e=>!isNaN(e.arvosana)).map((e,t,n)=>Object.assign({},e,{keskiarvo:U(_(j(n,"arvosana"),t+1)).toFixed(2)})),H=(e,t)=>[...e,...t.luennoitsija.split(",").map(C).filter(a.notEmpty).map(e=>Object.assign({},t,{luennoitsija:e}))],B=e=>e.replace("Avoin yo:","").replace("Open uni:","").trim(),G=e=>e.replace(/\(|\)/g,"").trim(),z=e=>e.replace(",","").trim(),V=e=>e.length>2,W=({luennoitsija:e,kurssimaara:t,luennot:n})=>`<p>\n    ${e},\n    kursseja ${t},\n    keskiarvo: ${n.keskiarvo},\n    noppia: ${n.totalOp}\n  </p>`,R=({title:e,lista:t,luennoitsijatElement:n})=>{const a=`\n    <div class="luennoitsijat pull-left">\n      <p><strong>${e}</strong></p>\n      ${t.map(W).join("")}\n    </div>\n  `;void 0!==n&&(n.innerHTML=n.innerHTML+a)},Q=e=>t=>t.kurssi===e,Z=e=>Object.assign({},e,{kurssi:e.kurssi.replace("Avoin yo: ","").replace("Open uni: ","")}),X=e=>t=>!e(t),ee=({id:e,stuff:t,data:n})=>{const[a,i]=((e,t)=>[e.filter(X(t)),e.filter(t)])(n,e=>!t.find(t=>e===t.lyhenne)),o=[...a.map(e=>({lyhenne:e,done:!0})),...i.map(e=>({lyhenne:e,done:!1}))].map(({lyhenne:e,done:t})=>({kurssi:w(e)||e,done:t})).reduce((e=>(t,n)=>t.find(Q(n.kurssi))||e.find(Q(n.kurssi))?t:[...t,n])(a),[]).map(Z),s=a.length===o.length?"All done, nice!":"";T({id:`${e}-progress`,content:`${a.length}/${o.length} ${s}`}),(({id:e,labels:t,datasets:n,backgroundColor:a})=>{const i=document.getElementById(`${e}-container`);if(null===i)throw new Error("drawPie(): Element with id "+e+"-container is null");i.style.display="block";const o=document.getElementById(e);if(null===o)throw new Error("drawPie(): Element with id "+e+" is null");new Chart(o,{type:"pie",data:{datasets:[{data:n,backgroundColor:a}],labels:t}})})({id:e,labels:j(o,"kurssi"),datasets:o.map(()=>1/o.length*100),backgroundColor:o.map(({done:e})=>e?"lightgreen":"lightgray")})},te=({stuff:e,keskiarvot:t,kurssit:n})=>{if(!n.length)return[];const a=(({kurssit:e,stuff:t})=>J(t.filter(({lyhenne:t})=>e.includes(t))))({kurssit:n,stuff:e});return t.reduce((e,t)=>{const n=(({opinnot:e,lyhenne:t})=>e.find(e=>t===e.lyhenne))({opinnot:a,lyhenne:t.lyhenne});if(n)return[...e,Object.assign({},n,{fromOpinnot:!0})];const i=e.filter(({fromOpinnot:e})=>e).reverse()[0];return[...e,Object.assign({},i,{arvosana:0})||t]},[])},ne=({keskiarvot:e,keskiarvotPerusopinnoista:t,keskiarvotAineopinnoista:n})=>[a.notEmpty(e)&&Object.assign({label:"Kurssien keskiarvo",data:j(e,"keskiarvo")},S),a.notEmpty(t)&&Object.assign({label:"Perusopintojen keskiarvo",data:j(t,"keskiarvo")},x),a.notEmpty(n)&&Object.assign({label:"Aineopintojen keskiarvo",data:j(n,"keskiarvo")},E)].filter(y),ae=e=>[{label:"Päivän opintopisteet",data:j(e,"op")},Object.assign({label:"Suoritukset",data:j(e,"cumulativeOp")},S,{type:"line"})].filter(y),ie=e=>[new Date(e,7,1),new Date(e+1,6,31,23,59,59)],oe=([e,t,n])=>new Date(n,t-1,e),se=e=>{const t=e.split(".");if(3===t.length)return t.map(Number);throw new Error("getPvmArray(): Parsing date failed")},re=(e,t)=>e.pvmDate.getTime()-t.pvmDate.getTime(),le=({value:e,values:[t,n]})=>e>=t&&e<=n,ue=(e,{pvmDate:t,op:n})=>{const a=t.getFullYear(),i=(({vuosi:e,pvmIsCurrentSemester:t,pvmIsNextSemester:n})=>{let a=0;return a=t?e:n?e+1:e-1})({vuosi:a,pvmIsCurrentSemester:le({value:t,values:ie(a)}),pvmIsNextSemester:le({value:t,values:ie(a+1)})});return Object.assign({},e,{[i]:n+(e[i]||0)})},pe=e=>{const t=e.getFullYear();return`${e.toLocaleString("fi",{month:"long"})} ${t}`},ke=(e,{pvmDate:t,op:n})=>{const a=pe(t);return Object.assign({},e,{[a]:n+(e[a]||0)})},de=(e,{pvmDate:t,cumulativeOp:n})=>Object.assign({},e,{[pe(t)]:n}),ce=({fn:e,stuff:t})=>t.sort(re).reduce(e,{}),me=({label:e,data:t,secondDataSet:n})=>[Object.assign({label:e,data:t},x),n&&Object.assign({},n,{type:"line"},E)].filter(y),ve=({id:e,label:t,labels:n,data:a,secondDataSet:i})=>L({id:e,type:i?"bar":"line",labels:n,datasets:me({label:t,data:a,secondDataSet:i})}),ye=(e,t)=>t.luennot.keskiarvo-e.luennot.keskiarvo||t.kurssimaara-e.kurssimaara,be=({key:e,data:t})=>`${e} ${t.laitos} keskiarvo on ${isNaN(t.keskiarvo)?"hyv":t.keskiarvo} ja painotettu keskiarvo on ${isNaN(t.painotettuKeskiarvo)?"hyv":t.painotettuKeskiarvo}`,he=({kurssimaara:e,luennoitsijamaara:t,op:n,openUniMaara:a,openUniOp:i,hyvMaara:o,hyvOp:s,maxKuukausi:r,keskiarvo:l,painotettuKeskiarvo:u,"pääaine":p,sivuaineet:k})=>{T({id:"opintojen-maara",content:`Olet suorittanut huimat ${e} erilaista kurssia! Good for you!`});const[d,c]=r[0].split(" ");T({id:"max-kuukausi-nopat",content:`Olit tulessa ${d}ssa ${c}! Suoritit silloin ${r[1]} noppaa! Whoah!`}),T({id:"keskiarvo",content:`Opintojen keskiarvo: ${l}. Painotettu keskiarvo: ${u}.`}),T({id:"luennoitsijoiden-maara",content:`Olet käynyt ${t} eri luennoitsijan kursseilla, ${(e/t).toFixed(2)} kurssia per luennoitsija, ${(n/t).toFixed(2)} op per luennoitsija.`}),T({id:"keskiarvo-op-maara",content:`Keskiarvolta ${(n/e).toFixed(2)} noppaa per kurssi.`}),a&&(({kurssimaara:e,openUniMaara:t,openUniOp:n})=>{const a=(t/e*100).toFixed(2);T({id:"open-uni-maara",content:`Olet suorittanut ${t} avoimen kurssia, joka on ${a}% opinnoistasi. Yhteensä ${n} op.`})})({kurssimaara:e,openUniMaara:a,openUniOp:i}),o&&(({kurssimaara:e,hyvMaara:t,hyvOp:n})=>{const a=(t/e*100).toFixed(2);T({id:"hyv-maara",content:`Olet saanut ${t} hyv merkintää, joka on ${a}% opinnoistasi. Yhteensä ${n} op.`})})({kurssimaara:e,hyvMaara:o,hyvOp:s}),p&&T({id:"pääaine-data",content:be({key:"Pääaineesi",data:p})}),k&&T({id:"sivuaineet-data",content:k.map(e=>be({key:"Sivuaineesi",data:e})).join("<br>")}),(e=>{const t=(e/60).toFixed(2);T({id:"vuodet-arvio",content:`Opintopistemäärän mukaan arvioin sinun suorittaneen ${t} vuotta opintojasi. Laskukaava = <span title="Opintopistemäärä / vuoden tavoiteopintopistemäärä">${e} / 60</span>.`})})(n)},ge=({val:e,minValue:t,maxValue:n})=>e>t?28*(e-t)/(n-t)+7:1,je=e=>void 0!==e.luennoitsija,fe=e=>e.includes("avoin yo")||e.includes("open uni"),Te=e=>{const t=e.filter(({arvosana:e})=>!isNaN(e));return(t.reduce((e,{op:t,arvosana:n})=>e+n*t,0)/j(t,"op").reduce(q,0)).toFixed(2)},Oe=({stuff:e,key:t})=>e.reduce((e,n)=>Object.assign({},e,{[n[t]]:e[n[t]]?e[n[t]]+1:1}),{}),Ke=({id:e,label:t,data:n})=>L({id:e,type:"bar",labels:Object.keys(n).map(e=>`${t} ${isNaN(e)?"hyv":e}`),datasets:[Object.assign({label:"Suorituksia",data:Object.values(n)},x)]}),Ae=()=>{if(!(()=>!!document.querySelector("[name=suoritus] + table + table"))())return;const{duplikaattiKurssit:e,perusOpinnot:t,aineOpinnot:n,"pääaine":i,sivuaineet:o}=(()=>({duplikaattiKurssit:p(),perusOpinnot:k(),aineOpinnot:d(),"pääaine":c(),sivuaineet:m()}))();(({duplikaattiKurssit:e,aineOpinnot:t,perusOpinnot:n,"pääaine":a,sivuaineet:i})=>{const o=document.querySelector("[name=suoritus] + table + table"),s=document.querySelector("#nuggets"),r=(({duplikaattiKurssit:e,perusOpinnot:t,aineOpinnot:n,"pääaine":a,sivuaineet:i})=>`\n  <div id="nuggets" class="margin-bottom-large">\n    <div class="clear margin-bottom-small">\n      <div id="perusopinnot-container" class="jeejee-pull-left" style="display:none;">\n        Perusopinnot <span id="perusopinnot-progress"></span>\n        <canvas id="perusopinnot" width="500" height="200"></canvas>\n      </div>\n      <div id="aineopinnot-container" class="jeejee-pull-left" style="display:none;">\n        Aineopinnot <span id="aineopinnot-progress"></span>\n        <canvas id="aineopinnot" width="500" height="200"></canvas>\n      </div>\n    </div>\n    <div class="clear">\n      <div class="jeejee-pull-left half">\n        <canvas id="chart-nopat" width="500" height="200"></canvas>\n      </div>\n      <div class="jeejee-pull-left half">\n        <canvas id="chart-keskiarvo" width="500" height="200"></canvas>\n      </div>\n    </div>\n    <div class="clear">\n      <div class="jeejee-pull-left half">\n        <canvas id="chart-nopat-kuukaudet" width="500" height="200"></canvas>\n      </div>\n      <div class="jeejee-pull-left half">\n        <div id="opintojen-maara"></div>\n        <div id="keskiarvo-op-maara"></div>\n        <div id="luennoitsijoiden-maara"></div>\n        <div id="open-uni-maara"></div>\n        <div id="hyv-maara"></div>\n        <div id="vuodet-arvio"></div>\n        <div id="max-kuukausi-nopat"></div>\n        <div id="keskiarvo"></div>\n        <div id="pääaine-data"></div>\n        <div id="sivuaineet-data"></div>\n        <div id="tagipilvi"></div>\n      </div>\n    </div>\n    <div class="clear">\n      <div class="jeejee-pull-left half">\n        <canvas id="chart-nopat-vuosi" width="500" height="200"></canvas>\n        <canvas id="chart-laitos-graafit" width="500" height="200"></canvas>\n      </div>\n      <div class="jeejee-pull-left half">\n        <canvas id="chart-arvosanat-groupattuna" width="500" height="200"></canvas>\n        <canvas id="chart-nopat-groupattuna" width="500" height="200"></canvas>\n      </div>\n    </div>\n\n    <div id="luennoitsijat"></div>\n    <div id="tools" class="margin-bottom-large">\n      <p>\n        <label style="margin-bottom:30px;">\n          Merkkaa tähän inputtiin pilkulla erottaen mahdolliset duplikaattikurssit, kas näin: A582103,A581325<br/>\n          <input type="text" name="duplikaattiKurssit" value="${e}" />\n        </label>\n      </p>\n\n      <p>\n        <label style="margin-bottom:30px;">\n          Merkkaa tähän inputtiin pilkulla erottaen perusopintokurssisi pääaineesta, kas näin vaikkapa: A582103,A581325<br/>\n          <input type="text" name="perusOpinnot" value="${t}" />\n        </label>\n      </p>\n\n      <p>\n        <label style="margin-bottom:30px;">\n          Merkkaa tähän inputtiin pilkulla erottaen aineopintokurssi pääaineesta, kas näin vaikkapa: A582103,A581325<br/>\n          <input type="text" name="aineOpinnot" value="${n}" />\n        </label>\n      </p>\n\n      <p>\n        <label style="margin-bottom:30px;">\n          Merkkaa tähän inputtiin pääaineesi tunnus, vaikka näin: TKT<br/>\n          <input type="text" name="pääaine" value="${a}" />\n        </label>\n      </p>\n\n      <p>\n        <label style="margin-bottom:30px;">\n          Merkkaa tähän inputtiin pilkulla erottaen sivuaineesi tunnukset, vaikka näin: TKT,MAT<br/>\n          <input type="text" name="sivuaineet" value="${i.join(",")}" />\n        </label>\n      </p>\n\n      <p>\n        <button id="kliketi-klik">\n          Päivitä chartit, esimerkiksi duplikaattikurssien lisäämisen jälkeen\n        </button>\n      </p>\n\n      <p>\n        <button id="kliketi-klik-esitäyttö-2017">\n          Esitäytä perus- ja aineopinnot tkt kandi opinnoilla (2017 &ge; ) huom: sisältää myös avoimen ja vanhan malliset lyhenteet\n        </button>\n      </p>\n\n      <p>\n        <button id="kliketi-klik-esitäyttö-pre-2017">\n          Esitäytä perus- ja aineopinnot tkt kandi opinnoilla (&le; 2016) huom: sisältää myös avoimen ja vanhan malliset lyhenteet\n        </button>\n      </p>\n    </div>\n\n    <p>\n      Haluatko lisätoiminnallisuutta tähän plugariin? Löysitkö virheen?<br>\n      Mikäli olet tkt opiskelija, <a href="https://github.com/JuhQ/weboodi-chart">tee pull request</a>.<br>\n      Mikäli opiskelet jotain muuta, laita mailia juha.tauriainen@helsinki.fi\n    </p>\n\n    <p>\n      Plugin löytyy googlen webstoresta <a href="https://chrome.google.com/webstore/detail/weboodi-charts/mmjejalobgipeicnedjpcnjkeamamlnd">https://chrome.google.com/webstore/detail/weboodi-charts/mmjejalobgipeicnedjpcnjkeamamlnd</a><br>\n      Lyhytosoite <a href="https://goo.gl/TrpRJr">https://goo.gl/TrpRJr</a>\n    </p>\n  </div>\n  `)({duplikaattiKurssit:e,aineOpinnot:t,perusOpinnot:n,"pääaine":a,sivuaineet:i});!!o&&(s?s.outerHTML=r:o.outerHTML=o.outerHTML+"\n  <style>\n    #luennoitsijat {\n      clear: both;\n      display: inline-block;\n      margin-bottom: 100px;\n    }\n\n    .luennoitsijat {\n      margin-right: 10px;\n    }\n\n    .clear {\n      clear: both;\n      display: table;\n      width: 100%;\n    }\n\n    @media only screen and (min-width: 900px) {\n      .jeejee-pull-left {\n        float: left;\n      }\n\n      .half {\n        width: 50%;\n      }\n    }\n\n    .margin-bottom-large {\n      margin-bottom: 100px;\n    }\n\n    .margin-bottom-small {\n      margin-bottom: 20px;\n    }\n\n    #nuggets input {\n      width: 100%;\n    }\n  </style>\n  "+r)})({duplikaattiKurssit:e,perusOpinnot:t,aineOpinnot:n,"pääaine":i,sivuaineet:o});const s=D(e).filter(je);if(!s.length)return;const r=J(s),{keskiarvotPerusopinnoista:l,keskiarvotAineopinnoista:u}=(({stuff:e,keskiarvot:t,perusOpinnot:n,aineOpinnot:a})=>{return{keskiarvotPerusopinnoista:te({stuff:e,keskiarvot:t,kurssit:n}),keskiarvotAineopinnoista:te({stuff:e,keskiarvot:t,kurssit:a})}})({stuff:s,keskiarvot:r,perusOpinnot:t,aineOpinnot:n}),y=(e=>e.reduce(H,[]).map((e,t,n)=>{const a=n.filter(({luennoitsija:t})=>t===e.luennoitsija),i=j(a.filter(e=>!isNaN(e.arvosana)),"arvosana"),o=U(i);return Object.assign({},e,{kurssimaara:a.length,luennot:{arvosanat:i,keskiarvo:o?o.toFixed(2):"hyv",op:j(a,"op"),totalOp:j(a,"op").reduce(q,0)}})}).reduce((e,t)=>e.find(({luennoitsija:e})=>e===t.luennoitsija)?e:[...e,t],[]))(s),b=(e=>j(e,"kurssi").map(B).map(G).reduce((e,t)=>[...e,...t.split(" ")],[]).filter(V).map(z).reduce((e,t)=>Object.assign({},e,{[t]:e[t]?e[t]+1:1}),{}))(s),h=ce({fn:ke,stuff:s}),g=ce({fn:de,stuff:s}),O=v(Object.values(h)),K=Object.entries(h).find(([e,t])=>t===O),{keskiarvo:A}=[...r].pop(),w=Te(s),$=(e=>Oe({stuff:e,key:"arvosana"}))(s),M=(e=>Oe({stuff:e,key:"op"}))(s),Y=(e=>e.reduce((e,t)=>{const{lyhenne:n,op:a,arvosana:i}=t,o=(e=>e.replace(/^(ay|a)/i,"").replace(/(-|_)[\d\D]+/i,"").replace(/[\d]+/,""))(n),s=(o.length?o:"emt").toUpperCase(),r=e[s],l=r?[...r.arvosanat,i].filter(X(isNaN)):[i].filter(X(isNaN)),u={courseCount:1,op:a,kurssit:[t],arvosanat:l,keskiarvo:U(l).toFixed(2),painotettuKeskiarvo:Te(r?r.kurssit:[t]),laitos:s};return Object.assign({},e,{[s]:r?Object.assign({},r,u,{courseCount:r.courseCount+1,op:r.op+a,kurssit:[...r.kurssit,t]}):u})},{}))(s),C=Object.values(Y).filter(({laitos:e})=>((e,t)=>e.indexOf(t)>-1)(((e,t)=>e.map(e=>e[t](e)))(o,"toUpperCase"),e.toUpperCase())),I=i?Y[i.toUpperCase()]:null;(e=>{const t=f(Object.values(e),"op");L({id:"chart-laitos-graafit",type:"bar",labels:j(t,"laitos"),datasets:[Object.assign({label:"Kursseja",data:j(t,"courseCount")},S),Object.assign({label:"Nopat",data:j(t,"op")},x),Object.assign({label:"Keskiarvo",data:j(t,"keskiarvo")},E),Object.assign({label:"Painotettu keskiarvo",data:j(t,"painotettuKeskiarvo")},E)]})})(Y),Ke({id:"chart-arvosanat-groupattuna",label:"Arvosana",data:$}),Ke({id:"chart-nopat-groupattuna",label:"op",data:M}),(e=>{const t=Math.min(...Object.values(e)),n=Math.max(...Object.values(e)),a=Object.keys(e).map(a=>({key:a,fontSize:ge({val:e[a],minValue:t,maxValue:n}),count:e[a]})).map(({fontSize:e,key:t,count:n})=>`<span style="font-size: ${e}px;" title="${t} on mainittu ${n} kertaa suorituksissasi">${t}</span>`).join(" ");T({id:"tagipilvi",content:a})})(b),(({stuff:e,keskiarvot:t,keskiarvotPerusopinnoista:n,keskiarvotAineopinnoista:i})=>{const o=P(e);a.notEmpty(o)&&L({id:"chart-nopat",customTooltip:!0,customTicks:!0,labels:j(o,"pvm"),datasets:ae(o)}),a.notEmpty(t)&&L({id:"chart-keskiarvo",labels:j(t,"pvm"),type:"line",datasets:ne({keskiarvot:t,keskiarvotPerusopinnoista:n,keskiarvotAineopinnoista:i})})})({stuff:s,keskiarvot:r,keskiarvotPerusopinnoista:l,keskiarvotAineopinnoista:u}),(({stuff:e,aineOpinnot:t,perusOpinnot:n})=>{a.notEmpty(t)&&ee({id:"aineopinnot",stuff:e,data:t}),a.notEmpty(n)&&ee({id:"perusopinnot",stuff:e,data:n})})({stuff:s,aineOpinnot:n,perusOpinnot:t}),(e=>{const t=document.querySelector("#luennoitsijat");if(null===t)throw new Error("piirräLuennoitsijaListat(): Element is null");t.innerHTML="",R({title:"Luennoitsijoiden top lista by kurssimaara",lista:f(e,"kurssimaara"),luennoitsijatElement:t}),R({title:"Luennoitsijoiden top lista by keskiarvo",lista:[...e.filter(({luennot:e})=>"hyv"!==e.keskiarvo).sort(ye),...e.filter(({luennot:e})=>"hyv"===e.keskiarvo)],luennoitsijatElement:t}),R({title:"Luennoitsijoiden top lista by nopat",lista:e.sort((e,t)=>t.luennot.totalOp-e.luennot.totalOp),luennoitsijatElement:t})})(y),(e=>{const t=ce({fn:ue,stuff:e}),n=Object.keys(t),a=Object.values(t),i=parseInt(n[0],10),o=1===n.length,s=o?[`${i-1}-${i}`,`${i}-${i+1}`,`${i+1}-${i+2}`]:n.map(e=>`${e}-${parseInt(e,10)+1}`),r=o?[0,a[0],0]:a;ve({id:"chart-nopat-vuosi",label:"Noppia per lukuvuosi",labels:s,data:r})})(s),(({kuukausiGroups:e,kumulatiivisetKuukaudetGroups:t})=>{ve({id:"chart-nopat-kuukaudet",label:"Noppia per kuukausi",labels:Object.keys(e),data:Object.values(e),secondDataSet:{label:"Kumulatiiviset nopat",data:Object.values(t)}})})({kuukausiGroups:h,kumulatiivisetKuukaudetGroups:g}),he({kurssimaara:s.length,luennoitsijamaara:y.length,op:j(s,"op").reduce(q,0),openUniMaara:j(s,"kurssi").map(e=>e.toLowerCase()).filter(fe).length,openUniOp:s.filter(({kurssi:e})=>fe(e.toLowerCase())).map(({op:e})=>e).reduce(q,0),hyvMaara:j(s,"arvosana").filter(isNaN).length,hyvOp:j(s.filter(({arvosana:e})=>isNaN(e)),"op").reduce(q),maxKuukausi:K,keskiarvo:A,painotettuKeskiarvo:w,"pääaine":I,sivuaineet:C}),N()};Ae()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),i=(e,t="[]")=>JSON.parse(localStorage.getItem(e)||t);t.getLocalStorage=i;t.getListFromLocalStorage=((e,t="[]")=>i(e,t).filter(a.notEmpty));t.setLocalStorage=(e=>t=>localStorage.setItem(e,JSON.stringify(t)))}]);